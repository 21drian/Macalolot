<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="700.0" prefWidth="1190.0" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="pos.controller.TransactionController">

    <stylesheets>
        <URL value="@/pos/css/transaction.css" />
    </stylesheets>

    <VBox prefHeight="700.0" prefWidth="1190.0" spacing="10" style="-fx-padding: 16;">

        <Label style="-fx-font-weight: bold;" text="Transaction">
            <font><Font name="Arial" size="18" /></font>
        </Label>
          <Button onAction="#handleLogout" prefHeight="32" style="-fx-background-color:#444; -fx-text-fill:white;" text="Logout" />

        <SplitPane dividerPositions="0.6, 0.5" prefHeight="640">
            
            <HBox alignment="CENTER_RIGHT">
            <children>
   
                   <TableView fx:id="productTable" prefHeight="580">
                       <columns>
                           <TableColumn fx:id="pIdCol" prefWidth="60" text="ID" />
                           <TableColumn fx:id="pNameCol" prefWidth="220" text="Product" />
                           <TableColumn fx:id="pPriceCol" prefWidth="100" text="Price" />
                           <TableColumn fx:id="pDiscountCol" prefWidth="90" text="Disc(%)" />
                           <TableColumn fx:id="pStockCol" prefWidth="90" text="Stock" />
                           <TableColumn fx:id="pTypeCol" prefWidth="100" text="Type" />
                           <TableColumn fx:id="pActionCol" prefWidth="120" text="Action" />
                       </columns>
                   </TableView>
            </children>
            </HBox>

            <!-- LEFT: Products -->
            <VBox spacing="10">
                <TextField fx:id="txtSearch" onKeyReleased="#searchProducts" promptText="Search product name..." />
            </VBox>

            <!-- RIGHT: Cart + Payment -->
            <VBox spacing="10">
                <Label style="-fx-font-weight: bold;" text="Cart" />

                <TableView fx:id="cartTable" prefHeight="420">
                    <columns>
                        <TableColumn fx:id="cNameCol" prefWidth="240" text="Item" />
                        <TableColumn fx:id="cQtyCol" prefWidth="60" text="Qty" />
                        <TableColumn fx:id="cPriceCol" prefWidth="90" text="Price" />
                        <TableColumn fx:id="cDiscCol" prefWidth="70" text="Disc(%)" />
                        <TableColumn fx:id="cSubCol" prefWidth="110" text="Subtotal" />
                        <TableColumn fx:id="cRemoveCol" prefWidth="90" text="Remove" />
                    </columns>
                </TableView>

                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Label text="Total:" />
                    <Label fx:id="lblTotal" style="-fx-font-weight: bold;" text="0.00" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Customer:" />
                    <ComboBox fx:id="cmbCustomer" prefWidth="240" promptText="Walk-in / select customer" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Payment:" />
                    <TextField fx:id="txtPayment" onKeyReleased="#computeChange" prefWidth="160" promptText="0.00" />
                    <Label text="Change:" />
                    <Label fx:id="lblChange" style="-fx-font-weight: bold;" text="0.00" />
                </HBox>

                <Button onAction="#checkout" prefHeight="40" style="-fx-background-color:#940857; -fx-text-fill:white;" text="Checkout" />
            </VBox>

        </SplitPane>
    </VBox>
</AnchorPane>
